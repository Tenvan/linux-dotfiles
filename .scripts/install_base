#!/usr/bin/env bash

source "$HOME/.scripts/defs"

# Init Install
initInstall "install_base"

## FINISHING #
finish

# dynamic wallpaper
git clone https://github.com/adi1090x/dynamic-wallpaper.git DynamicWallper
errorCheck "clone dynamic wallpaper"
cd DynamicWallper
./install.sh -s island
errorCheck "install dynamic wallpaper"
cd ..
rm -fr DynamicWallper

echo '
# In this section, we will show you different crontab syntax with examples.
#
# MIN HOUR  DOM MON     DOW  DESCRIPTION
#
# 10  09    05  02      *    Execute a job on 5th Feb 09:10 AM
# *   *     *   *       *    Execute a job on every minutes of every hour of every day
# 10  14    *   *       *    Execute a job on every day at 02:10 PM
# */5 *     *   *       *    Execute a job on every 5 minutes of every hour of every day
# 15  15    *   *       1-4  Execute a job at 03:15 PM on Monday to Friday
# 10  05    2   *       *    Execute a job on every month on 2nd date at 05:10 AM
# 00  08,11 *   *       *    Execute a job every day at 08:00 AM and 11:00 AM
# 00  10-18 *   *       *    Execute a job every day at every hours during 10AM to 06:00 PM
# 00  */2   *   *       *    Execute a job at every 2 hours every day
# 00  11    *   mar,dec *    Execute a job on March and December at 11:00 AM
# @hourly                    Execute a job once an hour
# @daily                     Execute a job once a day
# @weekly                    Execute a job once a week
# @monthly                   Execute a job once a month
# @yearly                    Execute a job once a year
# @reboot                    Execute the job when the system boots

0 * * * * env PATH=/usr/local/bin:/usr/bin DISPLAY=:0 DESKTOP_SESSION=awesome DBUS_SESSION_BUS_ADDRESS="unix:path=/run/user/1000/bus" /usr/bin/dwall -s $WALLPAPER_THEME' | sudo tee /var/spool/cron/$USER

crontab -e

sudo systemctl enable cronie.service --now
systemctl status cronie.service

# ranger plugins
mkdir "$HOME/.config/ranger/plugins"
ln -sf /usr/share/ranger/plugins/ranger_devicons ~/.config/ranger/plugins/ranger_devicons

# micro plugins
micro -plugin install comment editorconfig joinLines quoter filemanager \
jump detectindent go snippets crystal quickfix wc manipulator \
diff ftoptions linter literate status \
monokai-dark gotham-colors nordcolors
micro -plugin update

# rebuilds
sudo pamac build --no-confirm qt5-styleplugins

yarn global add eslint jshint jsxhint stylelint sass-lint markdownlint-cli raml-cop typescript tern js-beautify iconv-lite
yarn global upgrade
errorCheck "install global yarn"

# Base Development Tools

# nvm
curl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash
nvm install 18
corepack enable
errorCheck "install nvm"

# Fix Teams Black Screen
sudo ln -f -s /bin/true /usr/share/teams/resources/app.asar.unpacked/node_modules/slimcore/bin/rect-overlay

# flatpaks
flatpak install shortwave
# flatpak install bottles
errorCheck "install flatpaks"

sudo flatpak override --env=GTK_THEME=Adwaita:dark
gsettings set org.gnome.desktop.interface color-scheme prefer-dark

# twitter emoji font
sudo ln -sf /usr/share/fontconfig/conf.avail/75-twemoji.conf /etc/fonts/conf.d/75-twemoji.conf

# vms
sudo systemctl enable --now libvirtd
errorCheck "libvirtd service"

# printer
# HP MFP 178
echo "[hp_color_laser_mfp_178_179]
align-type=0
clean-type=0
farbe-kal-typ=0
kopier-typ=0
eingebetteter-server-typ=1
fax-typ=7
fw-download=False
bild=hp_farbig_laserjet_cp2025.png
io-mfp-mode=1
io-modus=1
io-support=14
job-storage=0
zeilenvorschub-kal-typ=0
model1=Terrible HP Farblaser-MFP 178nwg
monitor-typ=0
panel-check-type=0
pcard-typ=0
plugin=0
plugin-grund=65
Strom-Einstellungen=0
pq-diag-typ=0
r-typ=0
r0-agent1-kind=4
r0-agent1-sku=CE311A
r0-agent1-typ=4
r0-agent2-kind=4
r0-agent2-sku=CE310A
r0-agent2-typ=1
r0-agent3-typ=4
r0-agent3-sku=CE313A
r0-agent3-typ=5
r0-agent4-kind=4
r0-agent4-sku=CE312A
r0-agent4-typ=6
scan-src=3
scannen-typ=5
status-batterie-check=0
status-dynamische-zähler=0
status-typ=10
support-released=True
unterstützung-subtype=219b2b
support-type=2
unterstützung-ver=3.13.11
tech-class=Hbpl1
familienklasse=PCLM-COLOR
tech-subclass=Color
tech-type=4
usb-pid=332a
usb-vid=3f0
wifi-config=3" | sudo tee -a /usr/share/hplip/data/models/models.dat

hp-makeuri -g 192.168.2.155

# arduino and cnc
yarn global add cncjs
sudo usermod -a -G "$(stat -c "%G" /dev/ttyUSB0)" $USER
