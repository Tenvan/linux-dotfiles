#!/usr/bin/env bash

source "$HOME/.scripts/defs"

# Init Install
initInstall "install_base"
sound count-down

###########################
# collect needed packages #
###########################

# Manjaro Packages
if [ $IS_MANJARO = true ]; then
    install samba
    install manjaro-settings-samba
fi

# ArcoLinux Packages
if [ $IS_ARCO = true ]; then
    install arcolinux-config-awesome-git
    # Meta Packages
    install arcolinux-meta-log
    install arcolinux-meta-logout
    install arcolinux-meta-fun
    install arcolinux-meta-samba
    install arcolinux-meta-utilities
    # Interesting Packages
    install arcolinux-candy-beauty-git
fi

# system packages
install acpi
install acpid
install at
install arandr
install arj
install ark
install bashtop
install bat
install bitwarden
install blueman
install bpytop
install brightnessctl
install clamav
install clamtk
install copyq
install dex
install dnsutils
install docker
install docker-compose
install dpkg
install exa
install feh
install ffmpeg
install flameshot
install fzf
install glances
install gnome-keyring
install gparted
install gpick
install grc
install gtop
install gvfs-smb
install hardinfo
install htop
install ibus-daemon
install iftop
install inotify-tools
install iotop
install iptraf-ng
install jq
install kitty
install kteatime
install lhasa
install libgnome-keyring
install libsecret
install light
install lsd
install luacheck
install lxsession
install mpv
install multitail
install ncmpcpp
install neofetch
install networkmanager
install networkmanager-openconnect
install nitrogen
install notify-send.sh
install numlockx
install oh-my-posh-bin
install openconnect
install p7zip
install packagekit
install picom
install pm-utils
install polkit-gnome
install powershell-bin
install python-mutagen
install qbittorrent
install qjournalctl
install ranger
install redshift
install ripgrep
install s-tui
install scrot
install shell-color-scripts
install spectacle
install stow
install system-monitoring-center
install time
install timeshift
install toilet
install unclutter
install unrar
install upower
install watchexec
install wezterm
install wmctrl
install xautolock
install xbindkeys
install xclip
install xclip
install xdotool
install xdotool
install xorg-server-xephyr
install xorg-xbacklight
install xorg-xfd
install xorg-xsetroot
install xscreensaver
install xsel
install xwallpaper
install eject-applet
install xorg-xrandr
install feh
install cronie

# handling XFCE4
install xfce4-power-manager
uninstall xfce4-screensaver
uninstall xfce4-power-manager

# polkits
install polkit
install polkit-gnome
uninstall xfce-polkit

# sound setup
install alsa-oss
install alsa-utils
install livecd-sounds
install pamixer
install paprefs
install pasystray
install pavucontrol
install pnmixer
install ponymix
install sound-theme-smooth
install sp
install tvolnoti

install glfw-x11

if [ $IS_MANJARO = false ]; then
    install pulseaudio-alsa
    install pulseaudio-bluetooth
    install pulseaudio-equalizer
fi

# ssh
install openssh

# Base Development Tools
install base-devel
install git
install gitflow-avh
install git-delta
install pass
install gradle
install jdk-openjdk
install jdk8-openjdk
install nodejs-emojione
install nodejs-lts-gallium
install nvm
install nuget
install npm
install svn
install yarn
install tk
install nsis
install jq

# DotNet/Mono Setup
install dotnet-sdk
install mono
install mono-msbuild

# config tools
install lxappearance

# utilities from gnome
install gnome-disk-utility
install gnome-system-monitor
install gnome-system-tools
install gnome-logs
install gnome-calculator
install network-manager-applet

install qt5ct
install qt5gtk2
install qt5-styleplugins
uninstall gtk-theme-switch2
install gtk-engine-murrine

# file manager
install mc
uninstall rnr-fm
install ranger
install ranger_devicons-git
uninstall ufraw-thumbnailer

# Nemo
install cinnamon-translations
install gtkhash-nemo
install nemo
install nemo-audio-tab
install nemo-compare
install nemo-emblems
install nemo-fileroller
install nemo-image-converter
install nemo-media-columns
install nemo-mediainfo-tab
install nemo-preview
install nemo-qml-plugin-notifications
install nemo-seahorse
install nemo-share

# Rofi Configs
if [ $IS_ARCO = true ]; then
    install arcolinux-rofi-git
    install arcolinux-rofi-themes-git
    install rofi-themes
    install rofi-theme-fonts
fi
install rofi
install rofimoji

# Python libs
install python
install python-pip

# other
install bleachbit

# bluetooth setup
if [ $IS_MANJARO = true ]; then
    install manjaro-bluetooth
fi

if [ $IS_ARCO = true ]; then
    #install bluetooth-autoconnect
    install blueman
    #install bluez
    #install bluez-hid2hci
    #install bluez-libs
    #install bluez-plugins
    #install bluez-tools
    #install bluez-utils
fi

# printer setup
if [ $IS_MANJARO = true ]; then
    install manjaro-printer
fi
install brother-mfc-j4420dw
install canon-cque
install cups-pdf
install hplip
uninstall hpuld
install system-config-printer
install print-manager

install ghostscript
install gsfonts
install foomatic-db-engine
install foomatic-db
install foomatic-db-ppds
install foomatic-db-nonfree
install foomatic-db-nonfree-ppds
install foomatic-db-gutenprint-ppds
install gutenprint

# installation of important editors
install micro
install neovim
install aur/visual-studio-code-bin

# utils for editors
install bash-completion
install clang
install fd
install gdb
install graphviz
install prettier
install ripgrep
install shellcheck
install tar

# wallpapers, themes and icons
if [ "$IS_ARCO" = true ]; then
    install arcolinux-arc-arcolinux-blue-git
    install arcolinux-arc-paper-git
    install arcolinux-arc-smoke-git
    install arcolinux-arc-soft-blue-git
fi

if [ "$IS_MANJARO" = true ]; then
    install kvantum-manjaro
    install maia-console
    install maia-wallpaper
    install papirus-maia-icon-theme
    install xcursor-maia
    install manjaro-artwork
    install manjaro-artwork-extra
fi

# icons
if [ "$IS_MANJARO" = true ]; then
    install manjaro-artwork-icons
    install papirus-maia-icon-theme
    install maia-icon-theme
    install sardi-icons
fi

if [ $IS_ARCO = true ]; then
    install paper-icon-theme
    install papirus-icon-theme
    install zafiro-icon-theme
fi

# Extra
if [ $IS_ARCO = true ]; then
    install edu-system-git
    install edu-skel-git
    install arcolinux-meta-sddm-themes
    install archlinux-login-backgrounds-git
    
    install arcolinux_repo_3party/grub-theme-vimix-whitesur-ultrawide-git
    install arcolinux_repo_3party/grub-theme-vimix-whitesur-1080p-git
    install arcolinux_repo_3party/grub-theme-vimix-whitesur-2k-git
    install arcolinux_repo_3party/grub-theme-vimix-whitesur-4k-git
    install arcolinux_repo_3party/grub-theme-vimix-white-ultrawide-git
    install arcolinux_repo_3party/grub-theme-vimix-white-1080p-git
    install arcolinux_repo_3party/grub-theme-vimix-white-2k-git
    install arcolinux_repo_3party/grub-theme-vimix-white-4k-git
    install arcolinux_repo_3party/grub-theme-vimix-color-ultrawide-git
    install arcolinux_repo_3party/grub-theme-vimix-color-1080p-git
    install arcolinux_repo_3party/grub-theme-vimix-color-2k-git
    install arcolinux_repo_3party/grub-theme-vimix-color-4k-git
fi

# cursor
install bibata-cursor-theme
install bibata-cursor-translucent

if [ $IS_MANJARO = true ]; then
    install maia-cursor-theme
fi

# lightdm config
install lightdm
install lightdm-settings
install lightdm-gtk-greeter-settings
install lightdm-gtk-greeter
install lightdm-slick-greeter

# grub
if [ $IS_MANJARO = false ]; then
    install grub-customizer
    install update-grub
fi

if [ [ "$IS_MANJARO" != true ] && [ "$IS_ARCO" != true ] ]; then
    install grub2-theme-archlinux
fi

# btrfs tools
install grub-btrfs

#########################
# collect optional apps #
#########################
#install epdfview

# language files
install man-pages-de
install aspell-de
install mythes-de
install libmythes
install languagetool

# Browser
install vivaldi
install vivaldi-ffmpeg-codecs

# rust apps
install bat
install fd
install ripgrep
install tokei
install procs

# other Metas
if [ $IS_MANJARO = true ]; then
    install plasma-meta
    install xfce4-meta
fi

###############################
# uninstall unneeded packages #
###############################
fullUninstall

#################################
# install all (needed) packages #
#################################
fullInstall

## FINISHING #
finish

# dynamic wallpaper
git clone https://github.com/adi1090x/dynamic-wallpaper.git DynamicWallper
errorCheck "clone dynamic wallpaper"
cd DynamicWallper
./install.sh -s island
errorCheck "install dynamic wallpaper"
cd ..
rm -fr DynamicWallper

echo '
# In this section, we will show you different crontab syntax with examples.
# 
# MIN HOUR  DOM MON     DOW  DESCRIPTION
# 
# 10  09    05  02      *    Execute a job on 5th Feb 09:10 AM
# *   *     *   *       *    Execute a job on every minutes of every hour of every day
# 10  14    *   *       *    Execute a job on every day at 02:10 PM
# */5 *     *   *       *    Execute a job on every 5 minutes of every hour of every day
# 15  15    *   *       1-4  Execute a job at 03:15 PM on Monday to Friday
# 10  05    2   *       *    Execute a job on every month on 2nd date at 05:10 AM
# 00  08,11 *   *       *    Execute a job every day at 08:00 AM and 11:00 AM
# 00  10-18 *   *       *    Execute a job every day at every hours during 10AM to 06:00 PM
# 00  */2   *   *       *    Execute a job at every 2 hours every day
# 00  11    *   mar,dec *    Execute a job on March and December at 11:00 AM
# @hourly                    Execute a job once an hour
# @daily                     Execute a job once a day
# @weekly                    Execute a job once a week
# @monthly                   Execute a job once a month
# @yearly                    Execute a job once a year
# @reboot                    Execute the job when the system boots

0 * * * * env PATH=/usr/local/bin:/usr/bin DISPLAY=:0 DESKTOP_SESSION=awesome DBUS_SESSION_BUS_ADDRESS="unix:path=/run/user/1000/bus" /usr/bin/dwall -s $WALLPAPER_THEME' | sudo tee /var/spool/cron/$USER

crontab -e

sudo systemctl enable cronie.service --now
systemctl status cronie.service

# ranger plugins
mkdir "$HOME/.config/ranger/plugins"
ln -sf /usr/share/ranger/plugins/ranger_devicons ~/.config/ranger/plugins/ranger_devicons

# micro plugins
micro -plugin install comment editorconfig joinLines quoter filemanager \
jump detectindent go snippets crystal quickfix wc manipulator \
diff ftoptions linter literate status \
monokai-dark gotham-colors nordcolors
micro -plugin update

# rebuilds
sudo pamac build --no-confirm qt5-styleplugins

yarn global add eslint jshint jsxhint stylelint sass-lint markdownlint-cli raml-cop typescript tern js-beautify iconv-lite
yarn global upgrade
errorCheck "install global yarn"

sound complete
