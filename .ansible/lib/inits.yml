---
# is Arch based
- name: store user id
  become: false
  set_fact:
    user_id: "{{ lookup('ansible.builtin.env', 'USER') }}"

- name: store home dir
  become: false
  set_fact:
    home_dir: "{{ lookup('ansible.builtin.env', 'HOME') }}"

- name: store build dir
  become: false
  set_fact:
    build_dir: "{{ home_dir }}/.build"

# is Arch based
- name: Detect ArchLinux Family
  set_fact:
    is_arch_based: true
  when: ansible_os_family.lower() == "archlinux"

# is Fedora based
- name: Detect Fedora Family
  set_fact:
    is_rhel_based: true
  when: ansible_os_family.lower() == "redhat"

# is Manjaro
- name: Detect Manjaro
  set_fact:
    is_manjaro: true
  when: ansible_distribution.lower() == 'manjaro'

# is ArcoLinux
- name: Detect ArcoLinux
  set_fact:
    is_arcolinux: true
  when: ansible_facts['lsb']['description'].lower() == 'arcolinux'

# is RHEL
- name: Detect RHEL (Red Hat Enterprise Linux)
  set_fact:
    is_rhel: true
  when: ansible_distribution.lower() == 'rhel'

# is Fedora
- name: Detect Fedora
  set_fact:
    is_fedora: true
  when: ansible_distribution.lower() == 'fedora'

# is CentOS
- name: Detect CentOS
  set_fact:
    is_centos: true
  when: ansible_distribution.lower() == 'centos'

# Compile Awesome on Fedora Systems
- name: Install initial dependencies
  include_tasks: base.yml
  when: false

# Compile Awesome on Fedora Systems
- name: Install awesome-wm dependencies
  include_tasks: awesome.yml
  when: false

- block:
    - debug: var=ansible_facts
      when: false
    - debug: var=ansible_facts['lsb']
      when: false
    - debug: var=ansible_facts['os_family']
    - debug: var=ansible_facts['distribution']
    - debug: var=ansible_facts['distribution_major_version']
    - debug: var=ansible_facts['lsb']['description']
    - debug: var=ansible_distribution
    - debug: var=ansible_os_family
    - debug: var=is_rhel_based
    - debug: var=is_arch_based
    - debug: var=is_arcolinux
    - debug: var=is_manjaro
    - debug: var=is_fedora
    - debug: var=is_centos
    - debug: var=user_id
    - debug: var=home_dir
    - debug: var=build_dir
  when: is_dry
