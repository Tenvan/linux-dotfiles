---
- name: Define system vm packages
  vars:
    global_init:
      - dnsmasq

    archlinux_based_init:
      - bridge-utils
      # - openbsd-netcat
      - ovmf
      - qemu-arch-extra
      - qemu-desktop
      - vde2

    rhel_based_init:
      - ebtables
      - iptables-nft
    
    fedora_init:
      - bridge-utils
      - edk2-ovmf
      - swtpm
  
  include_tasks: install.yml
  
- name: Define system vm packages when not in docker
  vars:
    global_init:
      - dnsmasq
      - libvirt
      
  include_tasks: install.yml
  when: lookup('env', 'DOCKER_CONTAINER') != "true"
