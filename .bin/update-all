#!/usr/bin/env zsh

# System Update
if [ $IS_ARCH_BASED = true ]; then
  $PACTOOL -Syyu $PAKKER_ALL
fi

if [ $IS_RHEL_BASED = true ]; then
  sudo dnf upgrade --refresh
  sudo dnf update
  sudo grub2-mkconfig -o /boot/grub2/grub.cfg
fi

if [ $IS_SUSE_BASED = true ]; then
  sudo zypper up -y
  sudo zypper rm -y $(sudo zypper pa --unneeded | grep "i |" | awk '{print $5}')
fi

# Flatpak Update
flatpak update -v --noninteractive

# Zinit Self update
. "$HOME/.zinit/bin/zinit.zsh"
zinit self-update

# Zinit Plugin update
zinit update --parallel

# oh-my-posh update
curl -s https://ohmyposh.dev/install.sh | sudo bash -s
